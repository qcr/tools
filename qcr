#!/usr/bin/env bash
#
# A light wrapper for using QCR tools. This is deliberately light, so that
# users should never have to update this script once they have it, but will
# always have access to the latest templates.
#
# Please see https://github.com/qcr/tools for full details on how things work,
# and instructions on how to add your own templates. The more templates the
# merrier!
#
# Author: Ben Talbot
# Version: 0.3.0

if [[ "$(curl -w "%{url_effective}\n" -I -L -s -S google.com -o /dev/null)" =~ ^http://ias.qut.edu.au* ]]; then
  printf "\e[31m%s\n%s\e[0m" \
    "Internet access not authorised."
  exit 1
fi

if [ -z "$1" ]; then
  printf "\e[31m%s\n\t%s\e[0m\n" \
    "No tool name provided. Please pick from one of these scripts:" \
    "https://github.com/qcr/tools/blob/master/tools/"
  exit 1
fi

tool="$1"
shift
bash <(curl -s -L --compressed \
    https://github.com/qcr/tools/raw/master/tools/$tool ) "$@"
